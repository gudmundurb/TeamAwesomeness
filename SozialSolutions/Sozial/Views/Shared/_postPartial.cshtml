@model Sozial.Models.PostModel

@{
    var dateAndTime = DateTime.Now;
    int year = dateAndTime.Year;
    int month = dateAndTime.Month;
    int day = dateAndTime.Day;
}

<!--
<div class="col-md-6">
    <h2>DING</h2>
    <p class="list-group-item-text text_limit">
        @Html.DisplayFor(modelItem => Model.text)
    </p>
</div>
<div class="col-md-3 text-center">
    <span class="btn btn-default btn-sm" onclick="location.href='@Url.Action("Edit", "Post", new { id = Model.postID })'"><i class="glyphicon glyphicon-pencil"></i> Edit</span>
    <span class="btn btn-default btn-sm" onclick="location.href='@Url.Action("Details", "Post", new { id = Model.postID })'"><i class="glyphicon glyphicon-info-sign"></i> Details</span>
    <span class="btn btn-danger btn-sm" onclick="location.href='@Url.Action("Delete", "Post", new { id = Model.postID })'"><i class="glyphicon glyphicon-remove"></i> Delete</span>
</div>
    -->

<div class="widget-area comment-section">
    <div class="col-md-12">
        <div class="col-sm-2 thumbnail">
            <img class="img-responsive img-rounded" src="http://placehold.it/100x100" alt="A placeholder" />
        </div>
        <div class="col-md-8">
            <a href="#" title="Username">@Html.DisplayFor(modelItem => Model.userID)</a>
            <small class="pull-right">@day/@month/@year</small>
        </div>
        <div class="col-md-6">
            @Html.DisplayFor(modelItem => Model.text)
        </div>

        <div class="col-md-3 text-center">
            @if (Model.userID == User.Identity.Name) { 
                <span class="btn btn-default btn-sm" onclick="location.href='@Url.Action("Edit", "Post", new { id = Model.postID })'"><i class="glyphicon glyphicon-pencil"></i> Edit</span>
                <span class="btn btn-danger btn-sm" onclick="location.href='@Url.Action("Delete", "Post", new { id = Model.postID })'"><i class="glyphicon glyphicon-remove"></i> Delete</span>
            }
        </div>
        <br />
        <br />
        <br />
        <br />
        <br />
    </div>
</div>


<!-- REPLY HERE -->
@Html.Partial("../Shared/_replyToPostPartial", new Sozial.Models.CommentModel(@Model.postID))

<!-- REPLY HERE -->
<br />

@if (Model.comments != null)
{
    foreach (Sozial.Models.CommentModel comm in Model.comments)
    {
        <div class="col-md-12">
            <a class="list-post-item active">
                <div class="col-md-3">
                    <h4 class="list-group-item-heading">@Html.DisplayFor(modelItem => comm.authorID)</h4>
                    <small>@day/@month/@year</small>
                </div>

                <div class="col-md-6">
                    <p class="list-group-item-text text_limit">
                        @Html.DisplayFor(modelItem => comm.commentText)
                    </p>
                    <div class="title-adjustments"><input id="readMore" type="button" title="Read More" value="...Read more" onclick="location.href='@Url.Action("Details", "Post", new { id = Model.postID })'" /></div>
                </div>

                <div class="col-md-3 text-center">
                    @if (comm.authorID == User.Identity.Name) { 
                    <span class="btn btn-default btn-sm" onclick="location.href='@Url.Action("Edit", "Comment", new { id = Model.postID })'"><i class="glyphicon glyphicon-pencil"></i> Edit</span>
                    <span class="btn btn-danger btn-sm" onclick="location.href='@Url.Action("Delete", "Comment", new { id = Model.postID })'"><i class="glyphicon glyphicon-remove"></i> Delete</span>
                    }
                </div>
            </a>
        </div>
    }
}